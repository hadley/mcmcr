<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manipulate Monte Carlo Markov Chain Samples • mcmcr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">mcmcr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->

<section id="mcmcr" class="level1"><div class="page-header"><h1>mcmcr</h1></div>
<section id="introduction" class="level2"><h2>Introduction</h2>
<p><code>mcmcr</code> is an R package to manipulate Monte Carlo Markov Chain (MCMC) samples.</p>
<p>For the purposes of this discussion, an MCMC sample represents the value of a term from a single iteration of a single chain (of a single analysis). And while a simple parameter such as an intercept corresponds to a single term, more complex parameters such as an interaction between two factors consist of multiple terms with their own inherent dimensionality - in this case a matrix. Not surprisingly a set of MCMC samples can be stored in different ways. The three most common S3 classes store MCMC samples as follows:</p>
<ul>
<li>
<code><a href="http://www.rdocumentation.org/packages/coda/topics/mcmc">coda::mcmc</a></code> stores the MCMC samples from a single chain as a matrix where each each row represents an iteration and each column represents a variable</li>
<li>
<code><a href="http://www.rdocumentation.org/packages/coda/topics/mcmc.list">coda::mcmc.list</a></code> stores multiple <code>mcmc</code> objects (with identical dimensions) as a list where each object represents a parallel chain</li>
<li>
<code>rjags::mcarray</code> stores the samples from multiple parallel chains as an array where the first dimension is variables, the second dimension is the iterations and the third dimension is the chains.</li>
</ul>
<p>In all threes cases the terms/parameters are represented by a single dimension which means that the dimensionality inherent in the parameters is stored in the labelling of the variables, ie, <code>"bIntercept", "bInteraction[1,2]", "bInteraction[2,1]", ...</code>. The structure of the <code>mcmc</code> and <code>mcmc.list</code> objects emphasizes the time-series nature of MCMC samples and is optimized for thining. According to the documentation the <code>mcarray</code> preserve the dimensions of the original node array defined in a JAGS model.</p>
<p>The <code>mcmcr</code> packages introduces two related S3 classes which preserve the dimensionality of the parameters:</p>
<ul>
<li>
<code>mcmcr::mcmcarray</code> stores the samples for a single parameter from one or more chains where the first dimension is the chains, the second dimension is iterations and the subsequent dimensions represent the dimensionality of the parameter;</li>
<li>
<code>mcmcr::mcmcr</code> stores the samples for multiple uniquely named parameters with the same number of chains and iterations.</li>
</ul>
<p>The <code>mcmcr</code> package also introduces a third S3 class, <code><a href="http://www.rdocumentation.org/packages/mcmcr/topics/mcmcrs">mcmcr::mcmcrs</a></code>, which stores multiple <code>mcmcr</code> objects representing individual analyses.</p>
</section><section id="why-mcmcr" class="level2"><h2>Why mcmcr?</h2>
<p>The <code>mcmcarray</code>, <code>mcmcr</code> and <code>mcmcrs</code> classes were designed to be easy to manipulate. As a result, the <code>mcmcr</code> package introduces a variety of generic classes to:</p>
<ul>
<li>
<code>subset</code> individual objects by chains, iterations or parameters;</li>
<li>
<code>collapse</code> or <code>split</code> an object’s chains;</li>
<li>
<code>bind</code> multiple objects by their parameters, chains, iterations or terms;</li>
<li>
<code>combine</code> multiple objects by summing or otherwise combining their values;</li>
<li>
<code>mcmc_map</code> over an objects values;</li>
<li>assess if an object has <code>converged</code> using <code>rhat</code> and <code>esr</code> (effectively sampling rate);</li>
<li>and of course <code>coef</code>, <code>coerce</code>, <code>print</code>, <code>plot</code> etc said objects.</li>
</ul>
<p>Finally, the mcmcr package allows the user to readily <code>derive</code> an <code>mcmcr</code> object of new parameters (with potentially novel dimensionality) from an existing mcmc object by using standard R code to define the relationship between the ‘primary’ parameters in the existing object and the ‘derived’ parameters in the created object (and any other values specified by the user). No more rerunning a model because you forget to include a derived parameter!</p>
</section><section id="demonstration" class="level2"><h2>Demonstration</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(mcmcr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">mcmcr &lt;-<span class="st"> </span>mcmcr<span class="op">:::</span>mcmcr</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">mcmcr</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; $alpha</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; [1] 2.998247 3.998247</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; nchains:  2 </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; niters:  1000 </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; $beta</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;          [,1]    [,2]</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; [1,] 1.265929 1.33237</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; [2,] 2.265929 2.33237</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; nchains:  2 </span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt; niters:  1000 </span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt; $sigma</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; [1] 0.8265352</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; nchains:  2 </span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; niters:  1000</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="kw"><a href="reference/parameters.html">parameters</a></span>(mcmcr)</a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; [1] "alpha" "beta"  "sigma"</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="kw"><a href="reference/nchains.html">nchains</a></span>(mcmcr)</a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; [1] 2</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="kw"><a href="reference/niters.html">niters</a></span>(mcmcr)</a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; [1] 1000</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="kw"><a href="reference/nterms.html">nterms</a></span>(mcmcr)</a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="co">#&gt; [1] 7</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31"></a>
<a class="sourceLine" id="cb1-32" data-line-number="32"><span class="kw">coef</span>(mcmcr)</a>
<a class="sourceLine" id="cb1-33" data-line-number="33"><span class="co">#&gt; # A tibble: 7 x 7</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"><span class="co">#&gt;   term       estimate    sd zscore lower upper   pvalue</span></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"><span class="co">#&gt; * &lt;S3: term&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"><span class="co">#&gt; 1 alpha[1]      3.00  0.520   5.78 2.01   4.00 0.00100 </span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"><span class="co">#&gt; 2 alpha[2]      4.00  0.520   7.70 3.01   5.00 0.000500</span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"><span class="co">#&gt; 3 beta[1,1]     1.27  0.622   2.05 0.160  2.33 0.0230  </span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39"><span class="co">#&gt; 4 beta[2,1]     2.27  0.622   3.66 1.16   3.33 0.00100 </span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40"><span class="co">#&gt; 5 beta[1,2]     1.33  0.619   2.12 0.277  2.40 0.0150  </span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41"><span class="co">#&gt; 6 beta[2,2]     2.33  0.619   3.74 1.28   3.40 0.00200 </span></a>
<a class="sourceLine" id="cb1-42" data-line-number="42"><span class="co">#&gt; 7 sigma         0.827 0.664   1.52 0.424  2.73 0.000500</span></a>
<a class="sourceLine" id="cb1-43" data-line-number="43"><span class="kw"><a href="reference/rhat.html">rhat</a></span>(mcmcr, <span class="dt">by =</span> <span class="st">"term"</span>)</a>
<a class="sourceLine" id="cb1-44" data-line-number="44"><span class="co">#&gt; $alpha</span></a>
<a class="sourceLine" id="cb1-45" data-line-number="45"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-47" data-line-number="47"><span class="co">#&gt; $beta</span></a>
<a class="sourceLine" id="cb1-48" data-line-number="48"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb1-49" data-line-number="49"><span class="co">#&gt; [1,] 1.85 1.87</span></a>
<a class="sourceLine" id="cb1-50" data-line-number="50"><span class="co">#&gt; [2,] 1.85 1.87</span></a>
<a class="sourceLine" id="cb1-51" data-line-number="51"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-52" data-line-number="52"><span class="co">#&gt; $sigma</span></a>
<a class="sourceLine" id="cb1-53" data-line-number="53"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb1-54" data-line-number="54"><span class="kw"><a href="reference/esr.html">esr</a></span>(mcmcr)</a>
<a class="sourceLine" id="cb1-55" data-line-number="55"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb1-56" data-line-number="56"><span class="kw"><a href="reference/converged.html">converged</a></span>(mcmcr)</a>
<a class="sourceLine" id="cb1-57" data-line-number="57"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb1-58" data-line-number="58"><span class="kw">plot</span>(mcmcr[[<span class="st">"alpha"</span>]])</a></code></pre></div>
<p><img src="tools/README-unnamed-chunk-2-1.png" width="672"></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">mcmcr2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/derive.html">derive</a></span>(mcmcr, <span class="st">"gamma &lt;- sum(alpha) * sigma"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="reference/rhat.html">rhat</a></span>(mcmcr2)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; [1] 1.01</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">plot</span>(mcmcr2)</a></code></pre></div>
<p><img src="tools/README-unnamed-chunk-2-2.png" width="672"></p>
</section><section id="installation" class="level2"><h2>Installation</h2>
<p>To install the latest version from GitHub</p>
<pre><code><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github"># install.packages("devtools")
devtools::install_github("poissonconsulting/mcmcr")</a></code></pre>
</section><section id="citation" class="level2"><h2>Citation</h2>
<pre><code>
To cite package 'mcmcr' in publications use:

  Joe Thorley (2018). mcmcr: Manipulate Monte Carlo Markov Chain
  Samples. R package version 0.0.0.9040.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {mcmcr: Manipulate Monte Carlo Markov Chain Samples},
    author = {Joe Thorley},
    year = {2018},
    note = {R package version 0.0.0.9040},
  }</code></pre>
</section><section id="contribution" class="level2"><h2>Contribution</h2>
<p>Please report any <a href="https://github.com/poissonconsulting/mcmcr/issues">issues</a>.</p>
<p><a href="https://github.com/poissonconsulting/mcmcr/pulls">Pull requests</a> are always welcome.</p>
<p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</section><section id="inspiration" class="level2"><h2>Inspiration</h2>
<p><a href="https://github.com/cran/coda">coda</a> and <a href="https://github.com/cran/rjags">rjags</a></p>
</section></section>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joe Thorley <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/joethorley/stability-badges#experimental"><img src="https://img.shields.io/badge/stability-experimental-orange.svg" alt="stability-experimental"></a></li>
<li><a href="https://travis-ci.org/poissonconsulting/mcmcr"><img src="https://travis-ci.org/poissonconsulting/mcmcr.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/poissonconsulting/mcmcr"><img src="https://ci.appveyor.com/api/projects/status/github/poissonconsulting/mcmcr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/poissonconsulting/mcmcr?branch=master"><img src="https://img.shields.io/codecov/c/github/poissonconsulting/mcmcr/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License: MIT"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Joe Thorley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
